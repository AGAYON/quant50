{
    "version": "2.0",
    "updated": "2025-11-25",
    "owner": "Quant50 Backend Team",
    "tasks": [
        {
            "id": "T011",
            "title": "Weekly Snapshot & Model Registry Architecture",
            "description": "Implementar la generación de snapshots semanales inmutables. El script weekly_train.py debe guardar 'market_snapshot.parquet' (últimos 252 días) y 'model.pkl'. Configurar GitHub Actions para publicar estos artifacts como un Release (tag: weekly-YYYY-MM-DD) y hacer force-push del modelo a una rama huérfana 'model-registry' para referencia rápida.",
            "depends_on": [],
            "files": [
                "jobs/weekly_train.py",
                ".github/workflows/weekly_train.yml"
            ],
            "status": "todo",
            "priority": "critical",
            "owner": "dev_andres",
            "tags": [
                "architecture",
                "snapshot",
                "github-release"
            ]
        },
        {
            "id": "T012",
            "title": "Daily Incremental Loader (Just-in-Time)",
            "description": "Implementar lógica de carga incremental en 'daily_run.py'. Debe: 1) Descargar el último snapshot semanal desde GitHub Releases. 2) Consultar SOLO la barra del día actual a Alpaca. 3) Combinar en memoria para obtener los 252 días necesarios para features. NO persistir en disco local ni reconstruir histórico completo.",
            "depends_on": [
                "T011"
            ],
            "files": [
                "app/services/data_loader.py",
                "jobs/daily_run.py"
            ],
            "status": "todo",
            "priority": "critical",
            "tags": [
                "data",
                "etl",
                "incremental"
            ]
        },
        {
            "id": "T013",
            "title": "Fail-Safe Pipeline & Error Reporting",
            "description": "Implementar manejo de errores robusto ('Safety Halt'). Si falla cualquier paso del daily_run: 1) Cancelar TODAS las órdenes abiertas en Alpaca para asegurar estado neutro. 2) Generar un PDF de reporte indicando el error y el estado del portafolio. El sistema nunca debe fallar silenciosamente.",
            "depends_on": [
                "T012"
            ],
            "files": [
                "jobs/daily_run.py",
                "app/services/execute.py",
                "app/services/report.py"
            ],
            "status": "todo",
            "priority": "critical",
            "tags": [
                "reliability",
                "safety",
                "reporting"
            ]
        },
        {
            "id": "T014",
            "title": "Infrastructure Fixes (Secrets & Workflows)",
            "description": "Corregir bugs en workflows de GitHub Actions. 1) Fix typo en 'ALPACA_API_SECRET_KEY' en weekly_train.yml. 2) Configurar daily_run.yml para tener permisos de lectura de Releases y descarga de artifacts.",
            "depends_on": [
                "T011"
            ],
            "files": [
                ".github/workflows/weekly_train.yml",
                ".github/workflows/daily_run.yml"
            ],
            "status": "todo",
            "priority": "high",
            "tags": [
                "devops",
                "security",
                "github-actions"
            ]
        },
        {
            "id": "T015",
            "title": "Validation Layer (Market Clock & Model Age)",
            "description": "Agregar validaciones pre-ejecución. 1) Verificar 'get_clock()' de Alpaca: si el mercado está cerrado, abortar exitosamente ('Skipped'). 2) Verificar antigüedad del modelo: si el snapshot tiene >6 días, abortar con error (el modelo debe ser fresco de la semana).",
            "depends_on": [
                "T012"
            ],
            "files": [
                "app/services/validation.py",
                "jobs/daily_run.py"
            ],
            "status": "todo",
            "priority": "high",
            "tags": [
                "validation",
                "compliance"
            ]
        }
    ]
}